newman

Generate Wallet to use in CDC

→ Start session
  POST https://api.uat.platform.pagopa.it/session-wallet/v1/session [201 Created, 583B, 648ms]
  ✓  [Wallet for IO - Wallet Payment] - Start session

→ Get payment methods
  GET https://api.uat.platform.pagopa.it/io-payment-wallet/v1/payment-methods [200 OK, 4.43kB, 87ms]
  ┌
  │ 'Set paymentMethodId f25399bf-c56f-4bd2-adc9-7aef87410
  │ 609 successfully for payment method name CARDS'
  └
  ✓  [Wallet for onboarding - CARDS] Payment methods retrieved successfully with GET /payment-methods

→ Create a new wallet
  POST https://api.uat.platform.pagopa.it/io-payment-wallet/v1/wallets [201 Created, 1.08kB, 333ms]
  ┌
  │ 'WALLET_ID=3d8ac96f-eecc-4111-bcf3-ae615cd60f2f'
  └
  ✓  WALLET_ID is set
  ✓  [Wallet for onboarding - CARDS] New wallet created successfully with POST /wallets

→ Get wallet by id
  GET https://api.uat.platform.pagopa.it/io-payment-wallet/v1/wallets/3d8ac96f-eecc-4111-bcf3-ae615cd60f2f [200 OK, 710B, 159ms]
  ✓  [Wallet for onboarding - CARDS] Wallet retrieved successfully by it's id with GET /wallets/{walletId}

→ Create a new session wallet
  POST https://api.uat.platform.pagopa.it/webview-payment-wallet/v1/wallets/3d8ac96f-eecc-4111-bcf3-ae615cd60f2f/sessions [200 OK, 1.36kB, 718ms]
  ┌
  │ 'Read NPG response data...'
  │ 'Order id: [W1732714093426ljkN]'
  │ 'Field url: [https://stg-ta.nexigroup.com/phoenix-0.0/
  │ v3/?id=CARD_NUMBER&lang=ITA&correlationid=3d8ac96f-eec
  │ c-4111-bcf3-ae615cd60f2f&sessionid=4085f3c7-0453-41cb-
  │ 82f6-a259963c9da4&placeholder=Y]'
  │ 'correlation id: [3d8ac96f-eecc-4111-bcf3-ae615cd60f2f
  │ ]'
  │ 'session id: [4085f3c7-0453-41cb-82f6-a259963c9da4]'
  │ 'field id: [CARD_NUMBER]'
  └
  ✓  [Wallet for onboarding - CARDS] New wallet session created successfully with POST /wallets/{walletId}/sessions

→ Get NPG field (populate NPG cookies)
  GET https://stg-ta.nexigroup.com/fe/build/field_settings/CARD_NUMBER?lang=ITA [200 OK, 1.17kB, 376ms]

→ Fill NPG text data (populate iframe card data fields)
  POST https://stg-ta.nexigroup.com/fe/build/text/ [200 OK, 457B, 450ms]

→ Create new validation requests given a initialized wallet Copy
  POST https://api.uat.platform.pagopa.it/webview-payment-wallet/v1/wallets/3d8ac96f-eecc-4111-bcf3-ae615cd60f2f/sessions/W1732714093426ljkN/validations [200 OK, 571B, 1381ms]
  ✓  [Wallet for onboarding - CARDS] Session wallet validated successfully with POST /wallets/{walletId}/sessions/{orderId}/validations

→ Get wallet by user identifier
  GET https://api.uat.platform.pagopa.it/io-payment-wallet/v1/wallets [200 OK, 3.6kB, 135ms]
  ✓  [Wallet for onboarding - CARDS] Wallet retrieved successfully by it's user id with GET /wallets

┌─────────────────────────┬─────────────────────┬────────────────────┐
│                         │            executed │             failed │
├─────────────────────────┼─────────────────────┼────────────────────┤
│              iterations │                   1 │                  0 │
├─────────────────────────┼─────────────────────┼────────────────────┤
│                requests │                   9 │                  0 │
├─────────────────────────┼─────────────────────┼────────────────────┤
│            test-scripts │                   9 │                  0 │
├─────────────────────────┼─────────────────────┼────────────────────┤
│      prerequest-scripts │                   1 │                  0 │
├─────────────────────────┼─────────────────────┼────────────────────┤
│              assertions │                   8 │                  0 │
├─────────────────────────┴─────────────────────┴────────────────────┤
│ total run duration: 4.6s                                           │
├────────────────────────────────────────────────────────────────────┤
│ total data received: 11.59kB (approx)                              │
├────────────────────────────────────────────────────────────────────┤
│ average response time: 476ms [min: 87ms, max: 1381ms, s.d.: 380ms] │
└────────────────────────────────────────────────────────────────────┘
